<UserControl x:Class="NET.Paint.View.Component.Tools.Controls.Stroke"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:local="clr-namespace:NET.Paint.View.Component.Tools.Controls"
             xmlns:icons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:options="clr-namespace:NET.Paint.Drawing.Constant;assembly=NET.Paint.Drawing"
             xmlns:service="clr-namespace:NET.Paint.Drawing.Service;assembly=NET.Paint.Drawing"
             xmlns:converters="clr-namespace:NET.Paint.View.Component.Tools.Converters"
             xmlns:colorTypes ="clr-namespace:NET.Paint.Drawing.Model.Utility;assembly=NET.Paint.Drawing"
             mc:Ignorable="d" d:DataContext="{d:DesignInstance Type=service:XService, IsDesignTimeCreatable=True}"
             d:DesignHeight="200" d:DesignWidth="200">
    <UserControl.Resources>
        <converters:ContrastColorConverter x:Key="ContrastColorConverter"/>
    </UserControl.Resources>
    
    <StackPanel Grid.Row="1" DataContext="{Binding Tools}" Background="White">
        <Label Content="Type" Padding="0" Margin="2,2,0,2" FontSize="10"/>
        <UniformGrid>
            <RadioButton Height="25" Style="{StaticResource {x:Type ToggleButton}}" GroupName="StrokeTypeSelect" Content="{icons:MaterialIconExt Kind=SquareRoundedOutline}" IsChecked="{Binding ActiveStrokeType, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static options:XColorType.Solid}}"/>
            <RadioButton Height="25" Style="{StaticResource {x:Type ToggleButton}}" GroupName="StrokeTypeSelect" Content="{icons:MaterialIconExt Kind=GradientHorizontal}" IsChecked="{Binding ActiveStrokeType, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static options:XColorType.Gradient}}"/>
        </UniformGrid>
        <ContentPresenter x:Name="SolidGradientPresenter" Content="{Binding Stroke}" Margin="0,-25,0,0">
            <ContentPresenter.Resources>
                <DataTemplate DataType="{x:Type colorTypes:XSolidColor}">
                    <StackPanel DataContext="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}">
                        <Label Content="Color" Padding="0" Margin="2,0,0,2" FontSize="10"/>
                        <Border BorderThickness="1" BorderBrush="Black">
                            <Grid Height="25" DataContext="{Binding Tools}">
                                <local:ColorPicker SelectedColor="{Binding PrimaryColor, Mode=TwoWay}" IsOpen="False"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </DataTemplate>

                <DataTemplate DataType="{x:Type colorTypes:XGradient}">
                    <StackPanel>
                        <Label Content="Style" Padding="0" Margin="2,0,0,2" FontSize="10"/>
                        <ComboBox ItemsSource="{x:Static options:XOptions.GradientStyleOptions}" 
                                  SelectedItem="{Binding DataContext.Tools.ActiveStrokeGradientStyle, Mode=TwoWay, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                        <ContentPresenter Content="{Binding}">
                            <ContentPresenter.Resources>
                                <DataTemplate DataType="{x:Type colorTypes:XLinearGradient}">
                                    <StackPanel>
                                        <local:LinearGradient DataContext="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                                <DataTemplate DataType="{x:Type colorTypes:XRadialGradient}">
                                    <StackPanel>
                                        <local:RadialGradient DataContext="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ContentPresenter.Resources>
                        </ContentPresenter>
                    </StackPanel>
                </DataTemplate>
            </ContentPresenter.Resources>
        </ContentPresenter>
        <Label Content="Thickness" Padding="0" Margin="2,2,0,2" FontSize="10"/>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="30"/>
            </Grid.ColumnDefinitions>
            <Slider Value="{Binding StrokeThickness}" TickFrequency="0.1" Minimum="0.1" Maximum="20"/>
            <TextBlock Grid.Column="1" Text="{Binding StrokeThickness, StringFormat='{}{0:F1}'}" VerticalAlignment="Center" Margin="5,0,0,0"/>
        </Grid>
        <Label Content="Style" Padding="0" Margin="2,2,0,2" FontSize="10"/>
        <ComboBox ItemsSource="{x:Static options:XOptions.StrokeStyleOptions}" SelectedItem="{Binding StrokeStyle}" Height="25">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="2" Height="20">
                        <Line X1="5" Y1="10" X2="55" Y2="10" Stroke="Black" StrokeThickness="2" Margin="0,0,20,0">
                            <Line.StrokeDashArray>
                                <Binding Path="DashArray" />
                            </Line.StrokeDashArray>
                        </Line>
                        <TextBlock Text="{Binding Name}" FontSize="12" VerticalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
    </StackPanel>
</UserControl>
