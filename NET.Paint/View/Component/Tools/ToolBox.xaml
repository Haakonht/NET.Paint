<UserControl x:Class="NET.Paint.View.Component.Tools.ToolBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NET.Paint.View.Component.Tools"
             xmlns:icons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
             xmlns:service="clr-namespace:NET.Paint.Drawing.Service;assembly=NET.Paint.Drawing"
             xmlns:constants="clr-namespace:NET.Paint.Drawing.Constant;assembly=NET.Paint.Drawing"
             xmlns:tools="clr-namespace:NET.Paint.View.Component.Tools.Controls"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="200" d:Background="White"
             d:DataContext="{d:DesignInstance Type=service:XService, IsDesignTimeCreatable=True}">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../../Resources/Styles/Buttons.xaml"/>
                <ResourceDictionary Source="../../../Resources/Styles/Expanders.xaml"/>
                <ResourceDictionary Source="../../../Resources/ToolIcons.xaml"/>
                <ResourceDictionary Source="../../../Resources/ShapeIcons.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <DockPanel Margin="5" Grid.Row="0">
            <StackPanel DataContext="{Binding Tools}" DockPanel.Dock="Top">
                <Expander Header="Shape" Style="{StaticResource SimpleExpander}" IsExpanded="True">
                    <UniformGrid Columns="3">
                        <RadioButton x:Name="SelectorToolSelect" Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource SelectorToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Selector}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton x:Name="PencilToolSelect" Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource PencilToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Polyline}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource LineToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Line}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource CurveToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Curve}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource BezierToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Bezier}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton x:Name="EllipseToolSelect" Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource EllipseToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Ellipse}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource TriangleToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Triangle}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton x:Name="RectangleToolSelect" Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource RectangleToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Rectangle}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton x:Name="PolygonToolSelect" Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource PolygonToolIcon}"  IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Polygon}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource TextToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Text}}" GroupName="SelectedTool" Height="25"/>
                        <RadioButton Style="{StaticResource {x:Type ToggleButton}}" ContentTemplate="{StaticResource BitmapToolIcon}" IsChecked="{Binding ActiveTool, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static constants:XToolType.Bitmap}}" GroupName="SelectedTool" Height="25"/>
                    </UniformGrid>
                </Expander>

                <Expander Header="Stroke" IsExpanded="True" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <StackPanel>
                        <tools:ColorPicker SelectedColor="{Binding PrimaryColor}" Height="30"/>
                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="30"/>
                            </Grid.ColumnDefinitions>
                            <Slider Value="{Binding StrokeThickness}" TickFrequency="0.1" Minimum="0.1" Maximum="20"/>
                            <TextBlock Grid.Column="1" Text="{Binding StrokeThickness, StringFormat='{}{0:F1}'}" VerticalAlignment="Center" Margin="5,0,0,0"/>
                        </Grid>
                        <ComboBox ItemsSource="{x:Static constants:XOptions.StrokeStyleOptions}" SelectedItem="{Binding StrokeStyle}" Height="25" Margin="0,10,0,0">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="2" Height="20">
                                        <Line X1="5" Y1="10" X2="55" Y2="10" Stroke="Black" StrokeThickness="2" Margin="0,0,20,0">
                                            <Line.StrokeDashArray>
                                                <Binding Path="DashArray" />
                                            </Line.StrokeDashArray>
                                        </Line>
                                        <TextBlock Text="{Binding Name}" FontSize="12" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>
                </Expander>

                <Expander Header="Fill" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <tools:ColorPicker SelectedColor="{Binding SecondaryColor}" Height="30"/>
                </Expander>

                <Expander Header="Custom" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <tools:Custom DataContext="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=DataContext}"/>
                </Expander>
            </StackPanel>

            <StackPanel DockPanel.Dock="Bottom" VerticalAlignment="Bottom" DataContext="{Binding Tools}">
                <Expander Header="Ruler" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <tools:Ruler />
                </Expander>
                <Expander Header="Zoom" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <tools:Zoom />
                </Expander>
                <Expander Header="Grid" Style="{StaticResource SimpleExpander}" Margin="0,5,0,0">
                    <tools:Grid />
                </Expander>
            </StackPanel>
        </DockPanel>
        <Button Content="{icons:MaterialIconExt Kind=ChevronDoubleLeft}" Grid.Row="1" Height="15" Margin="5,0,5,5" Padding="0,-3" Background="Transparent" BorderBrush="Transparent" Click="Button_Click"/>
    </Grid>
</UserControl>
